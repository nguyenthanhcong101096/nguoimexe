<%= provide(:page_title, 'Messenger') %>
<%= provide(:page_description, 'Tin nhắn') %>

<div id="main" class="main">
  <div class="conversation">
    <div class="conversation__sidebar">
      <h3 class="conversation__headline">Messenger<%= inline_svg 'ico_pen.svg' %></h3>
      <div class="conversation__body conversation__body--sm">
        <div class="conversation__search">
          <div class="form-body">
            <input type="text" class="form-input search-box search-box--sm has-icon" placeholder="Tìm kiếm đoạn hội thoại">
            <%= inline_svg('ico_search.svg') %>
          </div>
        </div>
        <ul class="list-writer">
          <li class="list-writer__item js-new-message"></li>
          <%= render_conversations(current_user) %>
        </ul>
      </div>
    </div>
    <div class="conversation__container">
      <h3 class="conversation__headline"><%= @conversation.with_user(current_user).username %><%= inline_svg 'ico_pen.svg' %></h3>
      <div class="conversation__body conversation__body--lg">
        <%= render partial: 'message', collection: @conversation.messages.order(created_at: :asc) %>
        <div class="new-messages mt-16" user_id="<%= current_user.id %>"></div>
      </div>
      <%= render 'message_box' %>
    </div>
  </div>
</div>
